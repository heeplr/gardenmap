<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Garden Map</title>
    <style>
        html, body { margin: 0; overflow: hidden; }
        .carousel-item { transition: transform .25s ease, opacity .25s ease-out !important }
        #toolbox { position: absolute; top: 1rem; left: 1rem; }
        .plants-item { height: 3rem; line-height: 3rem; padding: 5px; cursor: grab; border-bottom: 1px solid #eee; user-select: none; }
        .plants-item img { width: auto; height: 2.5rem; margin-left: 1em; }
        #edit-form { position: fixed; top: 20px; left: 50%; transform: translateX(-50%); background: #fff; padding: 10px; border: 1px solid #aaa; z-index: 10; }
        #zoom-controls { position: absolute; bottom: 1rem; left: 1rem; }
        #export-svg { position: absolute; bottom: 1rem; right: 1rem; }
        svg { width: 100vw; height: 100vh; background: #ffffff; }
        image { cursor: grab; }
        #selection-rect {
          fill: rgba(0, 120, 255, 0.2);
          stroke: #0078ff;
          stroke-width: 1;
          stroke-dasharray: 4;
          pointer-events: none;
        }
        .selected-plant {
          outline: 1px solid #0078ff;
        }
        #month-controls {
            position: absolute;
            top: 1rem;
            right: 1rem;
            width: 16rem;
        }
        #edit-images div img { width: 100%; }

        .btn:hover {
          color: var(--bs-btn-hover-color) !important;
          background-color: var(--bs-btn-hover-bg) !important;
          border-color: var(--bs-btn-hover-border-color) !important;
        }
    </style>
    <link href="/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
</head>
<body>
    <script src="/js/bootstrap.bundle.min.js" integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"></script>

    <div id="month-controls" class="card">
        <div class="card-body">
            <div class="display-6 text-center" id="month"></div>
            <input class="form-range" type="range" min="1" max="12" step="1" value="1" id="monthSlider" onchange="monthUpdateIcons(this.value)" oninput="monthUpdateIcons(this.value)" title="adjust slider to select month">
        </div>
    </div>

    <div id="zoom-controls" class="btn-group-vertical" role="group" aria-label="zoom">
      <button type="button" class="btn btn-light" onclick="viewZoom(1.2)" title="zoom in">+</button>
      <button type="button" class="btn btn-light" onclick="viewZoom(1/1.2)" title="zoom out">-</button>
    </div>

    <button type="button" id="export-svg" class="btn btn-light" onclick="gardenExportSvg()" title="export svg">üì•</button>

    <div class="btn-group-vertical" id="toolbox" role="group" aria-label="toolbox">
      <button type="button" class="btn btn-light" data-bs-toggle="offcanvas" data-bs-target="#palette" title="open plant palette">üé®</button>

      <input type="checkbox" class="btn-check" id="heightVisualizationToggle" onclick="viewHeightToggle(this.checked)" autocomplete="off">
      <label class="btn btn-light" for="heightVisualizationToggle" title="turn height visualization on/off">üìè</label>

      <input type="checkbox" class="btn-check" id="boxSelectToggle" onclick="boxSelectToggle(this.checked)" autocomplete="off">
      <label class="btn btn-light" for="boxSelectToggle" title="turn box selection mode on/off">‚õ∂</label>

      <button type="button" class="btn btn-light" onclick="gardenDeletePlant()" title="delete selected plant(s)">üóëÔ∏è</button>
    </div>

    <div class="offcanvas offcanvas-start" data-bs-scroll="true" data-bs-backdrop="false" tabindex="-1" id="palette" aria-labelledby="paletteLabel">

      <div class="offcanvas-header">
        <div class="input-group mt-auto">
          <span class="input-group-text" id="palette-filter-search-label">üîç</span>
          <input id="palette-filter-search" type="text" class="form-control" placeholder="Suchen" aria-label="Suchen" aria-describedby="palette-filter-search-label" onkeyup="paletteFilterChanged()" title="enter searchterm to filter list">
          <button type="button" class="btn bg-transparent" style="margin-left: -40px; z-index: 100;" onclick="paletteFilterSearchClear()">‚úï</button>
        </div>
        <button type="button" class="btn-close text-reset mb-5" data-bs-dismiss="offcanvas" aria-label="Close" title="close palette"></button>
      </div>

      <div class="offcanvas-body">
        <div class="accordion" id="accordion-filter">
          <div class="accordion-item">
            <h2 class="accordion-header" id="heading-filter">
              <button class="accordion-button collapsed p-2" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-filter" aria-expanded="false" aria-controls="collapse-filter">
                Filter
              </button>
            </h2>
            <div id="collapse-filter" class="accordion-collapse collapse" aria-labelledby="heading-filter" data-bs-parent="#accordionExample">
              <div class="accordion-body">
                <div class="row pb-2">
                  <div class="input-group">
                    <label class="col my-auto" for="palette-filter-snails" title="filter by snail resistance">Schnecken:</label>
                    <input type="range" value="2" min="0" max="2" step="1" class="form-control-range" id="palette-filter-snails" title="filter by snail resistance" oninput="paletteFilterChanged()">
                  </div>
                  <output class="fw-bold" name="snails" id="palette-filter-snails-label" for="palette-filter-snails">alle</output>
                </div>

                <div class="row pb-2">
                  <label class="col my-auto" for="palette-filter-lifetime" title="filter by snail lifetime">Lebensdauer:</label>
                  <select id="palette-filter-lifetime"class="form-select col" aria-label="Lebensdauer" onchange="paletteFilterChanged()">
                    <option value="all" selected>alle</option>
                    <option value="perennial">nur mehrj√§hrig</option>
                    <option value="annual">nur einj√§hrig</option>
                  </select>
                </div>

              </div>
            </div>
          </div>
        </div>

        <div id="palette-plantlist"></div>
      </div>

      <div class="offcanvas-footer plants-toolbar">
        <button type="button" class="btn btn-light" onclick="paletteAdd()" title="add new plant species">+</button>
      </div>
    </div>

    <div id="plant-edit-form" class="modal" tabindex="-1">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" title="close edit form"></button>
          </div>
          <div class="modal-body">

              <div class="row mb-4">
                <td class="align-middle" colspan="2">
                  <div id="edit-vegetation-carousel" class="carousel slide">
                    <button class="carousel-control-prev w-auto" type="button" data-bs-theme="dark" data-bs-target="#edit-vegetation-carousel" data-bs-slide="prev" title="click for previous month">
                      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                      <span class="visually-hidden">Previous</span>
                    </button>
                    <div class="carousel-inner mx-5 w-auto" id="edit-vegetation"></div>
                    <button class="carousel-control-next w-auto" type="button" data-bs-theme="dark" data-bs-target="#edit-vegetation-carousel" data-bs-slide="next" title="click for next month">
                      <span class="carousel-control-next-icon" aria-hidden="true"></span>
                      <span class="visually-hidden">Next</span>
                    </button>
                  </div>
                </td>
              </div>

              <div class="row mx-5 my-1">
                <div class="col-2 p-0 my-auto">
                    <span class="form-label">Name:</span>
                </div>
                <div class="col">
                    <input id="edit-name" type="text" class="form-control" placeholder="Name" aria-label="Name">
                </div>
              </div>
              <div class="row mx-5 mb-3">
                <div class="col-2 p-0 my-auto">
                    <span class="form-label col-2">Trivialname:</span>
                </div>
                <div class="col">
                    <input id="edit-name-trivial" type="text" class="form-control" placeholder="Trivialname" aria-label="Trivialname">
                </div>
              </div>
              <div class="row mx-5 my-1">
                <div class="col-2 p-0 my-auto">
                    <span class="form-label">Typ:</span>
                </div>
                <div class="col input-group-sm">
                    <input id="edit-type" type="text" class="form-control" placeholder="Typ" aria-label="Typ">
                </div>
              </div>
              <div class="row mx-5 my-1">
                <div class="col-2 p-0 my-auto">
                    <span class="form-label">Bl√ºte von:</span>
                </div>
                <div class="col input-group-sm">
                    <input id="edit-bloom-start" type="text" class="form-control" placeholder="Monat" aria-label="Bl√ºte von">
                </div>
                <div class="col-2 p-0 my-auto">
                    <span class="form-label">Bl√ºte bis:</span>
                </div>
                <div class="col input-group-sm">
                    <input id="edit-bloom-end" type="text" class="form-control" placeholder="Monat" aria-label="Bl√ºte bis">
                  </div>
                </div>
              <div class="row mx-5 my-1">
                <div class="col-2 p-0 my-auto">
                    <span class="form-label">max. Alter:</span>
                </div>
                <div class="col">
                  <div class="input-group input-group-sm">
                    <input id="edit-max-lifetime" type="number" class="form-control" placeholder="Alter" aria-label="max. Alter"></input>
                    <div class="input-group-append">
                      <span class="input-group-text">Jahre</span>
                    </div>
                  </div>
                </div>
                <div class="col-2 p-0 my-auto">
                    <span class="form-label">max. Breite:</span>
                </div>
                <div class="col">
                  <div class="input-group input-group-sm">
                    <input id="edit-max-width" type="text" class="form-control w-90" placeholder="Wuchsbreite" aria-label="max. Breite">
                    <div class="input-group-append">
                      <span class="input-group-text">cm</span>
                    </div>
                  </div>
                </div>
              </div>

              <div class="row mx-5 my-1">
                <div class="col-2 p-0 my-auto">
                    <span class="form-label">min. Temperatur:</span>
                </div>
                <div class="col">
                  <div class="input-group input-group-sm">
                    <input id="edit-min-temperature" type="number" class="form-control" placeholder="Temperatur" aria-label="min. Temperatur"></input>
                    <div class="input-group-append">
                      <span class="input-group-text">¬∞C</span>
                    </div>
                  </div>
                </div>
              </div>

              <div class="row mx-5 my-1">
                <div class="col-2 p-0 my-auto">
                    <span class="form-label">Vermehrung:</span>
                </div>
                <div class="col input-group-sm">
                    <input id="edit-propagation" type="text" class="form-control" placeholder="Fortpflanzungsart" aria-label="Vermehrung">
                </div>
              </div>
              <div class="row mx-5 my-1">
                <div class="col-2 p-0 my-auto">
                    <span class="form-label">Schnitt:</span>
                </div>
                <div class="col input-group-sm">
                    <input id="edit-cutting" type="text" class="form-control" placeholder="Schnittanleitung" aria-label="Schnitt">
                </div>
              </div>
              <div class="row mx-5 my-1">
                <div class="col-2 p-0 my-auto">
                    <span class="form-label">Schnittzeit:</span>
                </div>
                <div class="col input-group-sm">
                    <input id="edit-cutting-time" type="text" class="form-control" placeholder="Zeit f. Schnitt" aria-label="Schnittzeit">
                </div>
              </div>
              <div class="row mx-5 my-1">
                <div class="col-2 p-0 my-auto">
                    <span class="form-label">Standort:</span>
                </div>
                <div class="col input-group-sm">
                    <input id="edit-location" type="text" class="form-control" placeholder="Standort" aria-label="Standort">
                </div>
              </div>
              <div class="row mx-5 my-1">
                <div class="col-2 p-0 my-auto">
                    <span class="form-label">Standort (ideal):</span>
                </div>
                <div class="col input-group-sm">
                    <input id="edit-location-ideal" type="text" class="form-control" placeholder="idealer Standort" aria-label="Standort (ideal)">
                </div>
              </div>
              <div class="row mx-5 my-1">
                <div class="col-2 p-0 my-auto">
                    <span class="form-label">Boden:</span>
                </div>
                <div class="col input-group-sm">
                    <input id="edit-soil" type="text" class="form-control" placeholder="Pflanzmedium" aria-label="Boden">
                </div>
              </div>
              <div class="row mx-5 my-1">
                <div class="col-2 p-0 my-auto">
                    <span class="form-label">Boden (ideal):</span>
                </div>
                <div class="col input-group-sm">
                    <input id="edit-soil-ideal" type="text" class="form-control" placeholder="ideales Pflanzmedium" aria-label="Boden (ideal)">
                </div>
              </div>
              <div class="row mx-5 my-1">
                <div class="col-2 p-0 my-auto">
                    <span class="form-label">Schnecken:</span>
                </div>
                <div class="col input-group-sm">
                    <input id="edit-snails" type="text" class="form-control" placeholder="Schneckenresistenz" aria-label="Schnecken">
                </div>
              </div>
              <div class="row mx-5 my-1">
                <div class="col-2 p-0 my-auto">
                    <span class="form-label">W√§ssern:</span>
                </div>
                <div class="col input-group-sm">
                    <input id="edit-watering" type="text" class="form-control" placeholder="Bew√§sserung" aria-label="W√§ssern">
                </div>
              </div>
              <div class="row mx-5 my-1">
                <div class="col-2 p-0 my-auto">
                    <span class="form-label">W√§ssern (ideal):</span>
                </div>
                <div class="col input-group-sm">
                    <input id="edit-watering-ideal" type="text" class="form-control" placeholder="ideale Bew√§sserung" aria-label="W√§ssern (ideal)">
                </div>
              </div>
              <div class="row mx-5 my-1">
                <div class="col-2 p-0 my-auto">
                    <span class="form-label">D√ºngung:</span>
                </div>
                <div class="col input-group-sm">
                    <input id="edit-nutrition" type="text" class="form-control" placeholder="N√§hrstoffe" aria-label="D√ºngung">
                </div>
              </div>
              <div class="row mx-5 my-1">
                <div class="col-2 p-0 my-auto">
                    <span class="form-label">D√ºngung (ideal):</span>
                </div>
                <div class="col input-group-sm">
                    <input id="edit-nutrition-ideal" type="text" class="form-control" placeholder="ideale N√§hrstoffe" aria-label="D√ºngung (ideal)">
                </div>
              </div>
              <div class="row mx-5 my-1">
                <div class="col-2 p-0 my-auto">
                    <span class="form-label">Skalierung:</span>
                </div>
                <div class="col input-group-sm">
                    <input id="edit-scale" type="number" step="0.01" class="form-control" placeholder="Skalierung" aria-label="Skalierung" title="change scale to draw smaller (<1.0)/larger (>1.0) icon">
                </div>
              </div>
              <div class="row mx-5 my-1">
                <div class="col-2 p-0 my-auto">
                    <span class="form-label">Notizen:</span>
                </div>
                <div class="col input-group-sm">
                    <input id="edit-notes" type="text" class="form-control" placeholder="Notizen" aria-label="Notizen">
                </div>
              </div>





          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" onclick="paletteSaveEdit()">Save</button>
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          </div>
        </div>
      </div>
    </div>

    {% include "map.svg" %}

    <script>
        {% include "main.js" %}
    </script>
</body>
</html>
